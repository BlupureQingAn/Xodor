# AI导入保留原文修复完成

## 问题描述
用户反馈：AI导入题库时会改动原题描述、原输入格式、原输出格式，这不应该发生。

## 问题分析

### 根本原因
AI prompt中使用了"提取"、"解析"等词汇，但没有明确要求**完整保留原文**，导致AI可能会：
- 重新组织题目描述
- 简化或改写输入输出格式说明
- 用自己的语言重新表述题目要求

### 影响范围
- `SmartQuestionImporter::buildAIPrompt()` - 智能导入的prompt
- `AIImportDialog::buildAIPrompt()` - AI导入对话框的prompt

## 解决方案

### 修改内容

#### 1. SmartQuestionImporter.cpp
在prompt中添加了**关键要求**部分：

```
⚠️ 【关键要求 - 必须严格遵守！】
1. **完整保留原文**：题目描述、输入格式、输出格式必须**逐字逐句**从原文复制，不得改写、简化或重新组织
2. **不要改动任何内容**：保持原文的标点、换行、格式、措辞完全一致
3. **只提取不改写**：你的任务是提取和识别，而不是改写或优化
```

并在description字段说明中强调：
```
- **描述：完整复制原文的题目描述，包括所有输入格式、输出格式说明**
```

在JSON示例中也明确标注：
```json
"description": "【完整复制原文的题目描述，包括所有输入输出格式说明，不得改动一个字】"
```

最后在prompt结尾再次强调：
```
记住：
1. description必须完整复制原文，不得改动
2. 测试数据必须是完整的实际数据，不能有任何省略！
```

#### 2. AIImportDialog.cpp
同样的修改应用到AIImportDialog的prompt中，确保两个导入路径都遵守相同的规则。

### 修改文件
- `src/ai/SmartQuestionImporter.cpp`
- `src/ui/AIImportDialog.cpp`

## 效果验证

### 预期效果
1. AI导入后，题目描述与原文**完全一致**
2. 输入格式说明与原文**完全一致**
3. 输出格式说明与原文**完全一致**
4. 只有以下内容由AI生成：
   - 难度判断（简单/中等/困难）
   - 标签分类（数组、字符串等）
   - 测试用例数据

### 测试方法
1. 准备一个包含题目的Markdown文件
2. 使用AI导入功能导入题库
3. 对比导入后的题目描述与原文
4. 确认没有任何改写或简化

## 技术细节

### Prompt设计原则
1. **明确指令**：使用"完整复制"、"逐字逐句"等明确词汇
2. **多次强调**：在prompt开头、中间、结尾多次强调关键要求
3. **正反示例**：提供错误示例（改写）和正确示例（原文复制）
4. **视觉标记**：使用⚠️、**加粗**等视觉元素突出重点

### AI行为约束
通过prompt明确告诉AI：
- 你的任务是**提取和识别**
- 你的任务**不是**改写或优化
- description字段必须是原文的**完整副本**

## 总结
通过在AI prompt中明确要求"完整保留原文"、"不得改动"，并多次强调这一要求，确保AI导入时只提取和识别题目，而不会改写原始内容。这样可以保证导入后的题目与原题库完全一致。
