{
    "description": "给定 n 条指令，操作一个初始为空的双端队列，元素为 2×2 矩阵。指令类型：1. 给定矩阵 A，插入队列头部。2. 给定矩阵 B，插入队列尾部。3. 若队列非空，删除队列中最晚被插入的矩阵。共有 m 个时刻，每个时刻发生以下事件之一：1. 修改第 i 条指令的内容。2. 给定区间 [l, r]，求依次执行第 l ∼ r 条指令后，队列中所有矩阵从头到尾相乘的结果（对 998244353 取模）。若队列空，结果为单位矩阵。",
    "difficulty": "hard",
    "id": "32_5396167441620003336",
    "options": [
    ],
    "referenceAnswer": "",
    "tags": [
        "数据结构",
        "线段树",
        "矩阵"
    ],
    "testCases": [
        {
            "description": "基本测试：样例输入",
            "input": "3 4\n1 2 3 9 3\n2 6 9 4 2\n2 2 8 2 1\n2 2 3\n1 2 1 3 1 0 1\n1 3 3\n2 1 3",
            "isAIGenerated": false,
            "output": "30 57 12 34\n2 3 9 3"
        },
        {
            "description": "基本测试：插入后删除，队列为空，输出单位矩阵",
            "input": "2 1\n1 1 0 0 1\n3\n2 1 2",
            "isAIGenerated": false,
            "output": "1 0 0 1"
        },
        {
            "description": "边界条件：只有一条指令，查询单条指令",
            "input": "1 1\n1 1 2 3 4\n2 1 1",
            "isAIGenerated": false,
            "output": "1 2 3 4"
        },
        {
            "description": "特殊情况：包含多次删除操作和指令修改",
            "input": "5 3\n1 1 0 0 1\n1 0 1 1 0\n2 2 0 0 2\n3\n3\n2 1 5\n1 4 1 5 5 5 5\n2 1 5",
            "isAIGenerated": true,
            "output": "2 0 0 2\n5 5 5 5"
        },
        {
            "description": "特殊情况：只有尾部插入操作，矩阵乘法验证",
            "input": "3 2\n2 1 1 1 1\n2 2 2 2 2\n2 3 3 3 3\n2 1 3\n1 2 1 4 4 4 4\n2 1 3",
            "isAIGenerated": true,
            "output": "6 6 6 6\n12 12 12 12"
        }
    ],
    "title": "宝藏",
    "type": "code"
}
