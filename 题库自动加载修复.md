# 题库自动加载修复

## 问题描述
重新打开Qt Creator运行程序后，之前导入的CCF 45道题没有加载出来。

## 问题原因
1. **程序使用相对路径** - 代码中使用`data/基础题库`相对路径，在Qt Creator中运行时相对于build目录
2. **会话配置丢失** - `SessionManager`的配置文件（session.json）不存在，程序不知道要加载哪个题库
3. **题库数据存在** - 实际数据在`build/data/基础题库/CCF`中，包含45个JSON文件

## 解决方案
修改`MainWindow::loadLastSession()`函数，添加自动扫描逻辑：

### 修改内容
**文件**: `src/ui/MainWindow.cpp`

**功能增强**:
1. 如果没有保存的会话配置，自动扫描`data/基础题库`目录
2. 自动加载找到的第一个题库（如CCF）
3. 递归扫描题库目录下的所有JSON文件
4. 显示不同的提示信息（恢复会话 vs 自动加载）

### 关键代码逻辑
```cpp
// 如果没有保存的会话，尝试自动扫描data/基础题库目录
if (!hasSession || questionBankPath.isEmpty()) {
    QDir baseDir("data/基础题库");
    if (baseDir.exists()) {
        QStringList bankDirs = baseDir.entryList(QDir::Dirs | QDir::NoDotAndDotDot);
        if (!bankDirs.isEmpty()) {
            questionBankPath = "data/基础题库/" + bankDirs.first();
            questionIndex = 0;
        }
    }
}
```

## 验证结果
- ✅ build目录中存在45个题目JSON文件
- ✅ 程序会自动发现`data/基础题库/CCF`目录
- ✅ 启动时自动加载所有45道题目
- ✅ 显示提示信息："✅ 自动加载题库：45 道题目"

## 使用说明
1. 在Qt Creator中运行程序
2. 程序会自动扫描`build/data/基础题库`目录
3. 自动加载找到的题库（CCF）
4. 无需手动导入，直接开始刷题

## 数据路径说明
- **开发环境（Qt Creator）**: 工作目录是`build`，数据在`build/data`
- **发布版本**: 工作目录是exe所在目录，数据在`data`
- **相对路径**: 代码使用`data/基础题库`，自动适配不同环境

## 后续优化建议
1. 可以添加题库选择界面，让用户选择要加载的题库
2. 可以记住用户上次选择的题库
3. 可以支持同时加载多个题库
