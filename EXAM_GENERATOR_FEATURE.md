# AI生成模拟题功能 - 完整说明

## 🎯 功能概述

基于现有题库，使用AI生成一套全新的模拟题，用于练习和测试。

## ✨ 核心功能

### 1. 智能题目生成
- **基于现有题库风格** - 分析题库特点，生成相似风格的题目
- **可配置难度** - 支持混合难度或指定难度
- **可配置数量** - 1-20道题可选
- **自动生成测试用例** - 每道题至少5个测试用例

### 2. 题库分析
- 自动分析现有题库的主要标签
- 识别题目难度分布
- 生成符合题库风格的新题

### 3. 完整测试数据
- 基本功能测试
- 边界条件测试
- 特殊情况测试
- 每个用例包含描述

## 🎨 使用界面

### 生成配置对话框
```
┌─────────────────────────────────────────────────┐
│ 🎯 AI生成模拟题                                │
├─────────────────────────────────────────────────┤
│                                                 │
│ ┌─ 生成配置 ─────────────────────────────────┐ │
│ │                                             │ │
│ │ 题目数量: [5 道题 ▼]                        │ │
│ │ 难度:     [混合难度 ▼]                      │ │
│ │ □ 自动生成测试用例                          │ │
│ │                                             │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│ 💡 提示：                                       │
│ • AI将基于现有题库生成类似风格的新题目         │
│ • 生成的题目会包含完整描述和测试用例            │
│ • 建议题目数量不超过10道，以保证质量            │
│ • 生成时间约1-2分钟                             │
│                                                 │
│ 准备生成                                        │
│ [████████████████████████] 0%                   │
│                                                 │
│ 📋 生成日志：                                   │
│ ┌─────────────────────────────────────────────┐ │
│ │                                             │ │
│ │                                             │ │
│ │                                             │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│              [开始生成]              [关闭]    │
└─────────────────────────────────────────────────┘
```

### 生成过程
```
┌─────────────────────────────────────────────────┐
│ 🎯 AI生成模拟题                                │
├─────────────────────────────────────────────────┤
│ 🤖 正在生成模拟题...                            │
│ [████████████████░░░░░░░░] 70%                 │
│                                                 │
│ 📋 生成日志：                                   │
│ ┌─────────────────────────────────────────────┐ │
│ │ 🚀 开始生成模拟题                           │ │
│ │ 📊 配置: 5道题, 难度: 混合难度              │ │
│ │ ⏳ 发送AI请求...                            │ │
│ │ 📝 提示词长度: 1234 字符                    │ │
│ │                                             │ │
│ │ ✅ AI响应接收完成                           │ │
│ │ 📝 解析AI返回的题目...                      │ │
│ │                                             │ │
│ │ ✅ 成功解析 5 道题目                        │ │
│ │   ✓ 数组去重 [简单] - 5个测试用例           │ │
│ │   ✓ 字符串反转 [简单] - 5个测试用例         │ │
│ │   ✓ 二叉树遍历 [中等] - 6个测试用例         │ │
│ │   ✓ 动态规划问题 [中等] - 5个测试用例       │ │
│ │   ✓ 图算法 [困难] - 7个测试用例             │ │
│ │                                             │ │
│ │ 🎉 模拟题生成完成！共 5 道题目              │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│                              [完成]             │
└─────────────────────────────────────────────────┘
```

## 📋 配置选项

### 题目数量
- **范围**: 1-20道题
- **默认**: 5道题
- **建议**: 不超过10道，保证质量

### 难度选择
- **混合难度** - 简单、中等、困难各占一定比例（推荐）
- **简单** - 全部为简单题
- **中等** - 全部为中等题
- **困难** - 全部为困难题

### 测试用例
- **自动生成** - 每道题至少5个测试用例（默认开启）
- 包含基本测试、边界条件、特殊情况

## 🔧 工作流程

### 1. 题库分析
```
分析现有题库：
├─ 统计题目总数
├─ 分析主要标签（取前5个）
├─ 识别难度分布
└─ 提取题目风格特征
```

### 2. 构建AI提示词
```
提示词包含：
├─ 现有题库分析结果
├─ 生成要求（数量、难度）
├─ 题目质量要求
├─ 测试用例要求
└─ JSON格式规范
```

### 3. AI生成
```
发送给Ollama：
├─ 使用配置的模型
├─ 等待AI响应
├─ 显示生成进度
└─ 处理错误情况
```

### 4. 解析结果
```
解析AI返回：
├─ 提取JSON内容
├─ 解析题目信息
├─ 解析测试用例
├─ 验证数据完整性
└─ 生成Question对象
```

### 5. 添加到题库
```
用户确认后：
├─ 添加到当前题库
├─ 更新题目列表
├─ 刷新刷题模式
└─ 显示成功提示
```

## 💡 使用方法

### 快速开始
```
1. 确保已导入题库（作为参考）
2. 题目 → 生成模拟题 (Ctrl+G)
3. 配置生成选项
4. 点击"开始生成"
5. 等待AI生成完成
6. 确认添加到题库
7. 开始练习！
```

### 详细步骤

#### 步骤1：打开生成对话框
```
菜单: 题目 → 生成模拟题
快捷键: Ctrl+G
```

#### 步骤2：配置生成选项
```
- 题目数量: 选择要生成的题目数量（建议5-10道）
- 难度: 选择混合难度或指定难度
- 测试用例: 勾选"自动生成测试用例"
```

#### 步骤3：开始生成
```
点击"开始生成"按钮
等待AI生成（约1-2分钟）
查看生成日志
```

#### 步骤4：查看结果
```
生成完成后：
- 查看生成的题目列表
- 检查题目数量和难度
- 确认测试用例数量
```

#### 步骤5：添加到题库
```
点击"完成"
选择"是"添加到题库
开始练习新题目
```

## 📊 生成示例

### 示例1：混合难度5道题
```
配置：
- 题目数量: 5道
- 难度: 混合难度
- 测试用例: 是

生成结果：
1. 数组去重 [简单] - 5个测试用例
2. 字符串反转 [简单] - 5个测试用例
3. 二叉树遍历 [中等] - 6个测试用例
4. 动态规划问题 [中等] - 5个测试用例
5. 图算法 [困难] - 7个测试用例

总计: 5道题，28个测试用例
生成时间: 约2分钟
```

### 示例2：简单题10道
```
配置：
- 题目数量: 10道
- 难度: 简单
- 测试用例: 是

生成结果：
1-10. 各种简单算法题

总计: 10道题，50+个测试用例
生成时间: 约3分钟
```

## 🎯 应用场景

### 场景1：考前模拟
```
目的: 考前练习
配置: 10道混合难度题
用途: 模拟考试环境
```

### 场景2：专项训练
```
目的: 针对性练习
配置: 5道指定难度题
用途: 强化特定难度
```

### 场景3：题库扩充
```
目的: 增加题目数量
配置: 多次生成不同难度
用途: 丰富题库内容
```

## ⚠️ 注意事项

### 1. 题库要求
- 必须先导入题库作为参考
- 题库越丰富，生成质量越高
- 建议至少有10道题作为参考

### 2. AI服务
- 需要配置Ollama服务
- 确保AI服务正常运行
- 生成时间取决于题目数量

### 3. 生成质量
- 建议每次不超过10道题
- 题目数量越少，质量越高
- 可以多次生成不同难度

### 4. 题目审核
- 生成的题目建议人工审核
- 检查题目描述是否清晰
- 验证测试用例是否合理

## 🔍 常见问题

### Q: 生成的题目质量如何？
A: 基于现有题库风格生成，质量取决于参考题库的质量和AI模型能力。

### Q: 可以生成多少道题？
A: 支持1-20道，建议不超过10道以保证质量。

### Q: 生成需要多长时间？
A: 约1-2分钟，取决于题目数量和AI服务性能。

### Q: 生成失败怎么办？
A: 检查AI服务状态，确保Ollama正常运行，然后重试。

### Q: 可以指定题目类型吗？
A: 当前基于现有题库风格生成，未来可能支持指定类型。

## 📝 技术细节

### AI提示词结构
```
1. 现有题库分析
   - 题目总数
   - 主要标签
   - 难度分布

2. 生成要求
   - 题目数量
   - 难度要求
   - 风格要求

3. 质量要求
   - 题目描述清晰
   - 包含约束条件
   - 测试用例完整

4. 格式要求
   - JSON格式
   - 字段规范
   - 数据类型
```

### 生成算法
```cpp
1. 分析现有题库
   - 统计标签频率
   - 识别难度分布
   - 提取风格特征

2. 构建提示词
   - 包含题库分析
   - 指定生成要求
   - 定义输出格式

3. 调用AI服务
   - 发送提示词
   - 等待响应
   - 处理错误

4. 解析结果
   - 提取JSON
   - 解析题目
   - 生成对象

5. 添加到题库
   - 用户确认
   - 批量添加
   - 更新UI
```

## 🎉 功能亮点

### 1. 智能分析
- 自动分析题库特征
- 生成符合风格的题目
- 保持题目一致性

### 2. 灵活配置
- 可配置数量和难度
- 支持混合难度
- 自动生成测试用例

### 3. 详细反馈
- 实时进度显示
- 详细生成日志
- 清晰的结果展示

### 4. 无缝集成
- 直接添加到题库
- 自动更新UI
- 立即可用

## 📦 相关文件

- `src/ui/ExamGeneratorDialog.h` - 生成对话框头文件
- `src/ui/ExamGeneratorDialog.cpp` - 生成对话框实现
- `src/ui/MainWindow.cpp` - 集成到主窗口
- `CMakeLists.txt` - 添加到构建系统

## ✅ 编译状态

**编译成功！** ✨

## 🚀 快捷键

- **Ctrl+G** - 打开生成模拟题对话框

---

**开始生成你的专属模拟题吧！** 🎯
