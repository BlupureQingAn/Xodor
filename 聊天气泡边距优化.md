# 聊天气泡边距优化

## 问题
用户反馈：单行文本的气泡有多余的空白高度，气泡上下与文字距离过大

## 原因分析
1. **布局边距过大**：上下各10px
2. **文档边距过大**：8px

## 修改内容

### 1. 减小布局边距
**修改前：**
```cpp
layout->setContentsMargins(isUser ? 10 : 5, 10, isUser ? 5 : 10, 10);
// 上下边距：10px
```

**修改后：**
```cpp
layout->setContentsMargins(isUser ? 10 : 5, 6, isUser ? 5 : 10, 6);
// 上下边距：6px（减少40%）
```

### 2. 减小文档边距
**修改前：**
```cpp
m_textBrowser->document()->setDocumentMargin(8);
```

**修改后：**
```cpp
m_textBrowser->document()->setDocumentMargin(4);
// 从8px减少到4px（减少50%）
```

### 3. 更新高度计算
**修改前：**
```cpp
int widgetHeight = textBrowserHeight + 20;  // 上下各10px
```

**修改后：**
```cpp
int widgetHeight = textBrowserHeight + 12;  // 上下各6px
```

## 效果对比

### 单行文本高度计算
**修改前：**
```
文档高度：16.5px（单行）
文档边距：8px × 2 = 16px
QTextBrowser：16.5 + 16 + 4 = 36.5px
Widget：36.5 + 20 = 56.5px
```

**修改后：**
```
文档高度：16.5px（单行）
文档边距：4px × 2 = 8px
QTextBrowser：16.5 + 8 + 4 = 28.5px
Widget：28.5 + 12 = 40.5px
```

**减少：** 56.5 - 40.5 = 16px（约28%）

## 优势
- ✅ 气泡更紧凑
- ✅ 单行文本不会显得空旷
- ✅ 多行文本仍然清晰可读
- ✅ 整体视觉效果更好

## 相关文件
- `src/ui/ChatBubbleWidget.cpp`
