# 文件菜单简化说明

## 修改内容

### 简化前的文件菜单

```
文件(F)
├─ 🤖 AI智能导入题库(I)...     Ctrl+I
├─ 刷新题库(R)                  Ctrl+F5
├─ 题库管理(M)...               Ctrl+M
├─ 清空当前题库(C)...           Ctrl+Shift+C
├─ ──────────────
└─ 退出(X)                      Ctrl+Q
```

**问题**：
- 功能过多，用户不清楚该用哪个
- "AI智能导入题库"、"刷新题库"、"清空当前题库"功能重复或不常用
- 菜单过于复杂

### 简化后的文件菜单

```
文件(F)
├─ 📚 题库管理(M)...            Ctrl+M
├─ ──────────────
└─ 退出(X)                      Ctrl+Q
```

**改进**：
- ✅ 只保留最核心的"题库管理"功能
- ✅ 所有题库相关操作都在题库管理对话框中完成
- ✅ 菜单简洁明了

## 题库管理对话框功能

打开"文件 → 题库管理"（Ctrl+M），可以：

### 1. 导入新题库
- 点击"➕ 导入新题库"按钮
- 选择文件夹或文件
- AI自动解析题目
- 保存到`data/基础题库/`

### 2. 切换题库
- 选中一个题库
- 点击"✓ 切换到此题库"
- 立即加载该题库的题目

### 3. 查看题库详情
- 选中一个题库
- 点击"👁️ 查看详情"
- 显示题目数量、完成度、文件信息等

### 4. 刷新题库
- 选中一个题库
- 点击"🔄 刷新题库"
- 重新统计题目数量

### 5. 重命名题库
- 选中一个题库
- 点击"✏️ 重命名"
- 输入新名称

### 6. 删除题库
- 选中一个题库
- 点击"🗑️ 删除题库"
- 确认删除

### 7. 导出路径
- 选中一个题库
- 点击"📤 导出路径"
- 复制路径或打开文件夹

## 题目编辑功能

题目的编辑功能在**题库面板**中：

### 访问方式
1. 点击左侧的"题库列表"标签
2. 或按快捷键 Ctrl+P

### 功能
- 查看所有题目
- 按状态筛选（未开始/进行中/已完成/已掌握）
- 查看题目详情
- 删除题目
- 重命名题目

### 数据存储
- 所有题目都存储在`data/基础题库/{题库名称}/`
- 题库面板和题库管理对话框操作的是同一份数据
- 修改会立即保存到文件

## 数据一致性

### 基础题库目录结构

```
data/
└─ 基础题库/
   ├─ CCF题库/
   │  ├─ question_001.json
   │  ├─ question_002.json
   │  └─ ...
   └─ LeetCode题库/
      ├─ easy/
      │  ├─ two_sum.json
      │  └─ ...
      └─ medium/
         └─ ...
```

### 操作流程

1. **导入题库**（题库管理对话框）
   - 解析题目 → 保存到`data/基础题库/{题库名}/`
   - 注册到题库管理器

2. **查看题目**（题库面板）
   - 从`data/基础题库/{当前题库}/`加载
   - 显示题目列表

3. **编辑题目**（题库面板）
   - 修改题目信息
   - 保存到`data/基础题库/{当前题库}/`

4. **刷新题库**（题库管理对话框）
   - 重新扫描`data/基础题库/{题库名}/`
   - 更新题目数量统计

### 数据同步

- ✅ 题库管理对话框和题库面板操作同一份数据
- ✅ 修改会立即保存到文件
- ✅ 刷新后会重新加载最新数据
- ✅ 不会出现数据不一致的问题

## 修改文件

### src/ui/MainWindow.cpp
- 简化文件菜单
- 只保留"题库管理"和"退出"

## 编译结果

```
✅ 编译成功
✅ 可执行文件: build\CodePracticeSystem.exe
✅ 所有功能正常
```

## 使用指南

### 导入题库
1. 文件 → 题库管理（Ctrl+M）
2. 点击"➕ 导入新题库"
3. 选择题库文件夹
4. 输入题库名称
5. 等待AI解析完成

### 查看和编辑题目
1. 点击左侧"题库列表"标签（Ctrl+P）
2. 查看所有题目
3. 可以删除、重命名题目

### 切换题库
1. 文件 → 题库管理（Ctrl+M）
2. 选中要切换的题库
3. 点击"✓ 切换到此题库"

### 刷新题目数量
1. 文件 → 题库管理（Ctrl+M）
2. 选中题库
3. 点击"🔄 刷新题库"

## 总结

通过简化文件菜单，现在：

- ✅ 菜单更简洁（只有2个选项）
- ✅ 功能更集中（所有题库操作在题库管理中）
- ✅ 用户体验更好（不会迷失在复杂的菜单中）
- ✅ 数据一致性（题库管理和题库面板操作同一份数据）

所有题库相关的操作都可以通过"文件 → 题库管理"（Ctrl+M）完成！
