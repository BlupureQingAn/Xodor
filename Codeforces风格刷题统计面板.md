# Codeforces 风格刷题统计面板

## 🎯 功能概述

在刷题视图中新增了类似 Codeforces 风格的统计面板，提供可视化的刷题数据展示。

---

## ✨ 主要功能

### 1. 统计卡片 📊

四个核心统计指标，以卡片形式展示：

```
┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐
│    ✅    │  │    🔥    │  │    ⭐    │  │    📅    │
│    42    │  │    7     │  │    15    │  │    3     │
│  总完成  │  │ 当前连续 │  │ 最长连续 │  │ 今日完成 │
└──────────┘  └──────────┘  └──────────┘  └──────────┘
```

**指标说明**：
- **总完成**：已完成的题目总数
- **当前连续**：当前连续刷题天数（🔥 表示保持连续）
- **最长连续**：历史最长连续刷题天数
- **今日完成**：今天完成的题目数量

---

### 2. 刷题热力图 🗓️

类似 GitHub 贡献图的热力图，显示最近12周的刷题活动：

```
📅 刷题热力图（最近12周）

周一  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周二  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周三  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周四  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周五  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周六  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■
周日  ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■

少 ■ ■ ■ ■ ■ 多
```

**颜色说明**：
- 深灰色 (#2d2d2d)：无活动（0题）
- 深红色 (#440000)：少量活动（1-2题）
- 中红色 (#660000)：中等活动（3-5题）
- 亮红色 (#880000)：较多活动（6-10题）
- 鲜红色 (#aa0000)：大量活动（10+题）

**交互功能**：
- 鼠标悬停显示具体日期和题目数量
- 例如："2024-12-05\n3 道题目"

---

### 3. 难度分布图 📈

显示各难度题目的完成情况：

```
📈 难度分布

简单  ████████████████░░░░  80 / 100
中等  ██████████░░░░░░░░░░  50 / 100
困难  ████░░░░░░░░░░░░░░░░  20 / 100
```

**颜色方案**：
- 简单：绿色 (#00aa00)
- 中等：橙色 (#ffaa00)
- 困难：红色 (#ff0000)

**显示内容**：
- 进度条显示完成比例
- 文字显示：已完成 / 总题目数

---

### 4. 最近活动 🕐

显示最近完成的题目列表：

```
🕐 最近活动

• 2024-12-05 14:30  ✅ 两数之和 (简单)
• 2024-12-05 13:15  ✅ 反转链表 (中等)
• 2024-12-04 20:45  ✅ 二叉树遍历 (中等)
```

---

## 🎨 界面设计

### 整体布局

```
┌─────────────────────────────────────────────────────────┐
│ 📊 刷题统计                                              │
├─────────────────────────────────────────────────────────┤
│                                                          │
│ ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐                │
│ │ ✅ 42│  │ 🔥 7 │  │ ⭐ 15│  │ 📅 3 │                │
│ │总完成│  │当前  │  │最长  │  │今日  │                │
│ └──────┘  └──────┘  └──────┘  └──────┘                │
│                                                          │
│ ┌────────────────────────────────────────────────────┐ │
│ │ 📅 刷题热力图（最近12周）                          │ │
│ │ [热力图网格]                                       │ │
│ │ 少 ■ ■ ■ ■ ■ 多                                  │ │
│ └────────────────────────────────────────────────────┘ │
│                                                          │
│ ┌────────────────────────────────────────────────────┐ │
│ │ 📈 难度分布                                        │ │
│ │ 简单  ████████████████░░░░  80 / 100              │ │
│ │ 中等  ██████████░░░░░░░░░░  50 / 100              │ │
│ │ 困难  ████░░░░░░░░░░░░░░░░  20 / 100              │ │
│ └────────────────────────────────────────────────────┘ │
│                                                          │
│ ┌────────────────────────────────────────────────────┐ │
│ │ 🕐 最近活动                                        │ │
│ │ • 2024-12-05 14:30  ✅ 两数之和 (简单)            │ │
│ │ • 2024-12-05 13:15  ✅ 反转链表 (中等)            │ │
│ └────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 样式特点

1. **深色主题**
   - 背景色：#242424
   - 卡片背景：#2d2d2d
   - 边框：#4a4a4a

2. **圆角设计**
   - 卡片圆角：12px
   - 热力图单元格：2px
   - 进度条：6px

3. **间距统一**
   - 主布局间距：20px
   - 模块间距：16px
   - 网格间距：3px

---

## 🔧 技术实现

### 核心组件

**PracticeStatsPanel** - 统计面板主组件
```cpp
class PracticeStatsPanel : public QWidget
{
    Q_OBJECT
public:
    explicit PracticeStatsPanel(QWidget *parent = nullptr);
    void updateStatistics();  // 更新统计数据
    
private:
    void createHeatMap();         // 创建热力图
    void createDifficultyChart(); // 创建难度图表
    void createStreakInfo();      // 创建连续统计
    void createRecentActivity();  // 创建最近活动
};
```

**HeatMapCell** - 热力图单元格
```cpp
class HeatMapCell : public QWidget
{
public:
    HeatMapCell(const QDate &date, int count, QWidget *parent = nullptr);
    
protected:
    void paintEvent(QPaintEvent *) override;  // 自定义绘制
};
```

### 数据获取

```cpp
// 获取活动数据（日期 -> 题目数量）
QMap<QDate, int> getActivityData() const;

// 获取当前连续天数
int getCurrentStreak() const;

// 获取最长连续天数
int getLongestStreak() const;

// 获取难度统计
QMap<QString, int> getDifficultyStats() const;
```

---

## 📝 使用说明

### 集成到 PracticeWidget

1. **添加统计面板**
```cpp
#include "PracticeStatsPanel.h"

// 在 PracticeWidget 中添加
PracticeStatsPanel *statsPanel = new PracticeStatsPanel(this);
layout->addWidget(statsPanel);
```

2. **更新统计数据**
```cpp
// 当题目完成后更新
statsPanel->updateStatistics();
```

### 查看统计

1. 打开程序，进入刷题模式
2. 在界面右侧或顶部查看统计面板
3. 鼠标悬停在热力图上查看详细信息

---

## 🎯 待实现功能

### 数据统计功能

需要在 `ProgressManager` 中添加：

1. **按日期统计**
```cpp
// 获取每日完成的题目数量
QMap<QDate, int> getDailyCompletionCount() const;

// 获取今日完成数
int getTodayCompletionCount() const;
```

2. **连续天数计算**
```cpp
// 计算当前连续刷题天数
int getCurrentStreak() const;

// 计算最长连续刷题天数
int getLongestStreak() const;
```

3. **难度统计**
```cpp
// 按难度统计完成情况
struct DifficultyStats {
    int easyTotal;
    int easyCompleted;
    int mediumTotal;
    int mediumCompleted;
    int hardTotal;
    int hardCompleted;
};

DifficultyStats getDifficultyStatistics() const;
```

4. **最近活动**
```cpp
// 获取最近完成的题目列表
QVector<QuestionProgressRecord> getRecentCompletions(int limit = 10) const;
```

---

## 📦 文件结构

```
src/ui/
├── PracticeStatsPanel.h      # 统计面板头文件
├── PracticeStatsPanel.cpp    # 统计面板实现
└── PracticeWidget.cpp         # 刷题主界面（集成统计面板）
```

---

## ✅ 当前状态

- ✅ 基础UI框架已完成
- ✅ 热力图组件已实现
- ✅ 难度分布图已实现
- ✅ 统计卡片已实现
- ⏳ 数据统计功能待实现
- ⏳ 集成到主界面待完成

---

## 🚀 下一步计划

1. **完善数据统计**
   - 在 ProgressManager 中添加日期统计
   - 实现连续天数计算
   - 实现难度统计

2. **集成到主界面**
   - 将统计面板添加到 PracticeWidget
   - 调整布局（可能使用分割器）
   - 添加显示/隐藏切换

3. **增强交互**
   - 点击热力图单元格查看当天题目
   - 点击难度条查看对应难度的题目
   - 点击最近活动跳转到题目

4. **性能优化**
   - 缓存统计数据
   - 异步加载热力图
   - 延迟渲染

---

## 🎉 预期效果

完成后，用户将获得：

1. ✅ **直观的进度展示** - 一眼看到刷题进度
2. ✅ **激励作用** - 连续天数激励持续学习
3. ✅ **数据分析** - 了解自己的强弱项
4. ✅ **美观的界面** - Codeforces 风格的现代化设计

---

## 🔍 参考设计

灵感来源：
- **Codeforces** - 刷题统计和难度分布
- **GitHub** - 贡献热力图
- **LeetCode** - 统计卡片设计

---

## 📝 编译状态

✅ 编译成功，无错误
✅ 基础组件已创建
⏳ 等待数据统计功能实现
⏳ 等待集成到主界面
