# 代码刷题系统 - 使用说明

## 快速开始

### 1. 启动程序

运行 `build\CodePracticeSystem.exe` 启动程序。

### 2. 导入题库

1. 点击菜单 **文件 → 导入题库** (或按 `Ctrl+I`)
2. 选择题库文件夹（例如：`data/sample_questions`）
3. 选择导入模式：
   - **每个文件一道题**：每个 Markdown 文件包含一道题
   - **每个文件一套题**：每个文件包含多道题（用 `##` 分隔）
   - **混合模式**：AI 自动识别（推荐）
4. 点击确定，等待导入完成

### 3. 浏览题目

- 导入成功后，第一题会自动加载
- 使用 **上一题** / **下一题** 按钮切换题目
- 题目会循环浏览（最后一题后回到第一题）

### 4. 编写代码

1. 在中间的代码编辑器中编写 C++ 代码
2. 代码会自动保存（每 300ms 防抖）
3. 下次打开同一题目时，会自动加载之前的代码

### 5. 运行测试

1. 点击 **运行测试** 按钮
2. 系统会自动：
   - 编译你的代码
   - 运行所有测试用例
   - 对比输出结果
3. 测试结果会显示在右侧的 AI 分析面板中

### 6. AI 代码分析

1. 点击 AI 分析面板中的 **AI分析代码** 按钮
2. 系统会调用 Ollama 本地模型分析你的代码
3. 分析结果包括：
   - 代码思路
   - 优化建议
   - 涉及的知识点

### 7. 查看历史

- 点击菜单 **历史 → 查看做题记录** (或按 `Ctrl+H`)
- 查看所有做过的题目和保存的代码

---

## 配置说明

### 配置文件位置

`data/config.json`

### 配置项

```json
{
  "compilerPath": "g++",           // C++ 编译器路径
  "ollamaUrl": "http://localhost:11434",  // Ollama 服务地址
  "ollamaModel": "qwen",           // 使用的模型名称
  "cloudApiKey": ""                // 云端 API Key（可选）
}
```

### 修改配置

1. 编辑 `data/config.json` 文件
2. 重启程序使配置生效

---

## 题库格式

### Markdown 格式要求

```markdown
# 题目标题

难度：简单/中等/困难

## 题目描述

这里是题目的详细描述...

## 示例

### 示例 1
输入: 测试输入
输出: 期望输出

### 示例 2
输入: 另一个输入
输出: 另一个输出

## 提示

- 提示 1
- 提示 2
```

### 支持的难度标记

- 简单 / easy / Easy
- 中等 / medium / Medium
- 困难 / hard / Hard

### 测试用例格式

系统会自动识别以下格式的测试用例：

```
输入: xxx
输出: yyy
```

或

```
input: xxx
output: yyy
```

---

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+I` | 导入题库 |
| `Ctrl+H` | 查看历史记录 |
| `Ctrl+Q` | 退出程序 |

---

## 常见问题

### Q: 编译失败怎么办？

**A:** 检查以下几点：
1. 确保已安装 g++ 编译器
2. 检查 `data/config.json` 中的 `compilerPath` 是否正确
3. 确保代码语法正确

### Q: AI 分析不工作？

**A:** 检查以下几点：
1. 确保 Ollama 服务正在运行（`ollama serve`）
2. 检查 `data/config.json` 中的 `ollamaUrl` 是否正确
3. 确保已安装指定的模型（`ollama pull qwen`）

### Q: 测试用例没有识别？

**A:** 检查 Markdown 文件格式：
- 确保使用 `输入:` 和 `输出:` 标记
- 或使用 `input:` 和 `output:` 标记
- 冒号后面要有空格

### Q: 代码没有自动保存？

**A:** 
- 代码会在停止输入 300ms 后自动保存
- 保存位置：`data/user_answers/[题目ID].json`
- 检查该目录是否有写入权限

### Q: 如何添加自己的题库？

**A:**
1. 创建一个文件夹
2. 按照上述 Markdown 格式编写题目
3. 使用导入功能导入该文件夹

---

## 示例题库

项目自带了 3 道示例题目，位于 `data/sample_questions/`：

1. **两数之和** - 简单
2. **反转字符串** - 简单
3. **斐波那契数列** - 中等

可以用这些题目测试系统功能。

---

## 数据存储

### 目录结构

```
data/
├── config.json              # 配置文件
├── questions/               # 题库存储
│   └── bank.json           # 导入的题目
├── user_answers/            # 用户代码
│   ├── [题目ID1].json
│   ├── [题目ID2].json
│   └── ...
└── sample_questions/        # 示例题库
    ├── 01_两数之和.md
    ├── 02_反转字符串.md
    └── 03_斐波那契数列.md
```

### 数据格式

#### 题目格式 (questions/bank.json)

```json
[
  {
    "id": "uuid",
    "title": "题目标题",
    "type": "code",
    "difficulty": "easy",
    "tags": ["数组", "哈希表"],
    "description": "题目描述...",
    "testCases": [
      {
        "input": "输入数据",
        "output": "期望输出"
      }
    ],
    "referenceAnswer": "参考答案"
  }
]
```

#### 用户代码格式 (user_answers/[id].json)

```json
{
  "questionId": "uuid",
  "code": "用户代码...",
  "lastModified": "2024-11-29T22:00:00"
}
```

---

## 技术支持

如有问题，请查看：
- [功能文档](FEATURES.md) - 详细功能说明
- [README](README.md) - 项目概述
- [GitHub Issues](https://github.com/your-repo/issues) - 提交问题

---

## 更新日志

### v1.0.0 (2024-11-29)

**核心功能**
- ✅ 题库导入和管理
- ✅ 代码编辑和自动保存
- ✅ 本地编译和测试
- ✅ AI 代码分析
- ✅ 历史记录查看

**已知限制**
- 仅支持 C++ 语言
- 测试用例需要手动编写
- AI 分析需要本地 Ollama 服务

**计划功能**
- 题目列表侧边栏
- 错题本功能
- 图形化设置界面
- 进度统计图表
