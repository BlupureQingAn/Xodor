以下是整理好的第34次CCF计算机软件能力认证（CSP）模拟试题集合。

---

# 第34次CCF计算机软件能力认证

## 题目 1：矩阵重塑（其一）

**时间限制：** 1.0 秒  
**空间限制：** 512 MiB

### 题目背景

矩阵（二维）的重塑（reshape）操作是指改变矩阵的行数和列数，同时保持矩阵中元素的总数不变。

### 题目描述

矩阵的重塑操作可以具体定义为以下步骤：

设原矩阵为 $M$，其维度为 $n \times m$，即有 $n$ 行和 $m$ 列。新矩阵为 $M'$，其维度为 $p \times q$。重塑操作要满足 $n \times m = p \times q$，这保证了元素的总数不变。

1. **线性化原矩阵**：按照行优先的顺序，将原矩阵 $M$ 的元素转换成一个长度为 $n \times m$ 的一维数组 $A$。这意味着你先读取 $M$ 的第 0 行元素，然后是第 1 行，依此类推，直到最后一行。
2. **填充新矩阵**：使用一维数组 $A$ 中的元素按照行优先的顺序填充新矩阵 $M'$。首先填充 $M'$ 的第 0 行，直到该行有 $q$ 个元素，然后继续填充第 1 行，直到所有 $p$ 行都被填满。

给定原矩阵中的一个元素的位置 $(i, j)$（$0 \le i < n$ 且 $0 \le j < m$），我们可以找到这个元素在被线性化后的一维数组 $A$ 中的位置 $k$（$0 \le k < n \times m$），然后确定它在新矩阵 $M'$ 中的位置 $(i', j')$（$0 \le i' < p$ 且 $0 \le j' < q$）。它们之间满足如下数学关系：
$$ i \times m + j = k = i' \times q + j' $$

给定 $n \times m$ 的矩阵 $M$ 和目标形状 $p$、$q$，试将 $M$ 重塑为 $p \times q$ 的矩阵 $M'$。

### 输入格式

从标准输入读入数据。
输入共 $n+1$ 行。
输入的第一行包含四个正整数 $n$、$m$ 和 $p$、$q$。
接下来依次输入原矩阵 $M$ 的第 0 到第 $n-1$ 行，每行包含 $m$ 个整数，按列下标从 0 到 $m-1$ 的顺序依次给出。

### 输出格式

输出到标准输出。
输出共 $p$ 行，每行 $q$ 个整数，表示重塑后的矩阵 $M'$。输出格式与输入相同，即依次输出 $M'$ 的第 0 行到第 $p-1$ 行；行内按列下标从 0 到 $q-1$ 的顺序输出，且两个整数间仅用一个空格分隔。

### 样例 1

**输入：**

```text
2 3 3 2
1 2 3
4 5 6
```

**输出：**

```text
1 2
3 4
5 6
```

### 样例 2

**输入：**

```text
2 2 1 4
6 6
6 6
```

**输出：**

```text
6 6 6 6
```

### 子任务

全部的测试数据满足：

* $n$、$m$ 和 $p$、$q$ 均为正整数且 $n \times m = p \times q \le 10^4$；
* 输入矩阵中每个元素的绝对值不超过 1000。

### 提示

评测环境仅提供各语言的标准库，特别地，不提供任何线性代数库（如 numpy、pytorch 等）。

---

## 题目 2：矩阵重塑（其二）

**时间限制：** 1.0 秒  
**空间限制：** 512 MiB

### 题目背景

矩阵转置操作是将矩阵的行和列交换的过程。在转置过程中，原矩阵 $A$ 的元素 $a_{ij}$ 会移动到转置后的矩阵 $A^T$ 的 $a_{ji}$ 的位置。这意味着 $A$ 的第 $i$ 行第 $j$ 列的元素在 $A^T$ 中成为了第 $j$ 行第 $i$ 列的元素。

例如，有矩阵 $A$ 如下：
$$ A = \begin{bmatrix} a & b & c \\ d & e & f \end{bmatrix} $$
它的转置矩阵 $A^T$ 会是：
$$ A^T = \begin{bmatrix} a & d \\ b & e \\ c & f \end{bmatrix} $$
矩阵转置在线性代数中是一个基本操作，广泛应用于各种数学和工程领域。

### 题目描述

给定 $n \times m$ 的矩阵 $M$，试编写程序支持以下查询和操作：

1. **重塑操作** `p q`：将当前矩阵重塑为 $p \times q$ 的形状（重塑的具体定义见上一题）；
2. **转置操作**：将当前矩阵转置；
3. **元素查询** `i j`：查询当前矩阵第 $i$ 行 $j$ 列的元素（$0 \le i < n$ 且 $0 \le j < m$）。

依次给出 $t$ 个上述查询或操作，计算其中每个查询的结果。

### 输入格式

从标准输入读入数据。
输入共 $n+t+1$ 行。
输入的第一行包含三个正整数 $n$、$m$ 和 $t$。
接下来依次输入初始矩阵 $M$ 的第 0 到第 $n-1$ 行，每行包含 $m$ 个整数，按列下标从 0 到 $m-1$ 的顺序依次给出。
接下来输入 $t$ 行，每行包含形如 `op a b` 的三个整数，依次给出每个查询或操作。具体输入格式如下：

* 重塑操作：`1 p q`
* 转置操作：`2 0 0`
* 元素查询：`3 i j`

### 输出格式

输出到标准输出。
每个查询操作输出一行，仅包含一个整数表示查询结果。

### 样例 1

**输入：**

```text
3 2 3
1 2
3 4
5 6
3 0 1
1 2 3
3 1 2
```

**输出：**

```text
2
6
```

### 样例 2

**输入：**

```text
3 2 5
1 2
3 4
5 6
3 1 0
2 0 0
3 1 0
1 3 2
3 1 0
```

**输出：**

```text
3
2
5
```

**样例 2 解释：**

* 初始矩阵：$\begin{bmatrix} 1 & 2 \\ 3 & 4 \\ 5 & 6 \end{bmatrix}$，$(1,0)$ 位置元素为 3；
* 转置后：$\begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \end{bmatrix}$，$(1,0)$ 位置元素为 2；
* 重塑后：$\begin{bmatrix} 1 & 3 \\ 5 & 2 \\ 4 & 6 \end{bmatrix}$，$(1,0)$ 位置元素为 5。

### 子任务

* 80% 的测试数据满足：$t \le 100$；
* 全部的测试数据满足：
  * $t \le 10^5$ 且其中转置操作的次数不超过 100；
  * $n$、$m$ 和所有重塑操作中的 $p$、$q$ 均为正整数且 $n \times m = p \times q \le 10^4$；
  * 输入矩阵中每个元素的绝对值不超过 1000。

### 提示

对于 $n \times m$ 的矩阵，虽然转置和重塑操作都可以将矩阵形态变为 $m \times n$，但这两种操作通常会导致不同的结果。
评测环境仅提供各语言的标准库，特别地，不提供任何线性代数库（如 numpy、pytorch 等）。

---

## 题目 3：文本分词

**时间限制：** 1.5 秒  
**空间限制：** 512 MiB

### 题目背景

西西艾弗岛大数据中心正在开展大语言模型研究。为了更好地处理文本数据，需要将文本转化为数字序列，这通过词汇表进行。词汇表的生成过程是一个迭代的过程。

### 题目描述

词汇表包括一系列字符串。输入文本事先经过处理，字母统一为小写。
**生成过程**：

1. **初始化**：
   * 将输入文本切分为单词序列，统计全部单词频率。
   * 将单词拆分为单字母字符串，作为初始词汇表。
   * 统计所有出现的字符，按字典序加入词汇表。
   * 将输入的单词切分为词汇序列（初始为字符序列）。
2. **迭代合并**：
   * 统计当前词汇序列中，所有相邻“词汇对”的出现频率。
   * 选取频率最高的“词汇对”拼接为一个新词汇加入词汇表。
   * **优先级规则**（频率相同时）：
     1. 拼接后字符串长度最短的优先；
     2. 前一个词汇长度最短的优先；
     3. 拼接后字符串字典序最小的优先。
   * 生成合并规则，将所有单词序列中的对应“词汇对”合并。
   * **注意**：对于相同词汇组成的对（如 `<a, a>`），序列 `a a a` 合并为 `aa a`，`a a a a` 合并为 `aa aa`（从前向后顺序）。
3. **终止条件**：
   * 重复上述过程，直到词汇表达到指定长度 $m$，或者所有输入单词都被合并为一个词汇。

### 输入格式

从标准输入读入数据。
第一行包含两个正整数 $n$ 和 $m$，分别表示输入的单词的数量和期望的词汇表长度。
接下来 $n$ 行，每行包含一个非空字符串 $s$ 和一个正整数 $f$，表示输入的单词和其出现的频率。$s$ 只含小写字母。

### 输出格式

输出共 $m$ 行，每行包含一个字符串，按照加入词汇表的顺序输出所有词汇。

### 样例 1

**输入：**

```text
4 8
cut 15
cute 10
but 6
execute 3
```

**输出：**

```text
b
c
e
t
u
x
ut
cut
```

**样例 1 解释：**

1. 初始词汇表：`b, c, e, t, u, x`。
2. 统计“词汇对”频率：`ut` 频率最高（$15+10+6+3=34$）。
3. 合并 `u, t` 为 `ut`，加入词汇表。当前词汇表：`b, c, e, t, u, x, ut`。
4. 更新切分：`c ut`, `c ut e`, `b ut`, `e x e c ut e`。
5. 再次统计频率：`c ut` 频率 28，最高。
6. 合并 `c, ut` 为 `cut`，加入词汇表。当前词汇表：`b, c, e, t, u, x, ut, cut`。
7. 达到长度 8，结束。

### 子任务

* 20% 数据：$n \le 200$， $m$ 恰好等于字符种类数。
* 40% 数据：$n \le 200$， $m \le 200$。
* 80% 数据：$n \le 2000$， $m \le 2500$。
* 100% 数据：$n \le 10000$， $m \le 5000$ 且 $m \ge$ 字符种类数，$|s| \le 25$，总频率 $\le 10^6$。

---

## 题目 4：货物调度

**时间限制：** 2.0 秒  
**空间限制：** 512 MiB

### 题目描述

西西艾弗岛上共有 $n$ 间物流仓库，小 P 目前有 $m$ 件货物存放其中。为了获得至少为 $v$ 的现金，小 P 需要选取一些货物卖出。

已知货物信息如下，第 $i$ 件（$0 \le i < m$）货物：

* 存放在第 $t_i$ 间仓库中（$0 \le t_i < n$）；
* 价值为 $a_i$，即选择卖出该货物可获得 $a_i$ 的现金。

但在调货出库时也需要支付一些费用，对于第 $j$ 间（$0 \le j < n$）仓库：

* 只要调用了该仓库的货物（至少一件），就需要支付 $b_j$ 的基本费用；
* 如果调用了该仓库中共 $k$ 件货物，则还需要支付 $k \times c_j$ 的计件费用。

小 P 的最终目标是获得至少为 $v$ 的现金，即要求卖出的货物总价值减去总费用的结果大于或等于 $v$。 在满足该目标的前提下，试为小 P 规划一种花费最小的卖货方案。

### 输入格式

从标准输入读入数据。
输入的第一行包含三个正整数 $n$、$m$ 和 $v$。
接下来 $n$ 行输入仓库信息，其中第 $j$ 行（$0 \le j < n$）包含两个整数 $b_j$ 和 $c_j$。
接下来 $m$ 行输入货物信息，其中第 $i$ 行（$0 \le i < m$）包含两个整数 $a_i$ 和 $t_i$。

### 输出格式

输出到标准输出。
仅输出一个整数，表示完成目标前提下的最小花费。

### 样例 1

**输入：**

```text
2 3 15
2 1
3 2
10 0
20 1
15 0
```

**输出：**

```text
4
```

**样例 1 解释：**
最优方案：选取货物 0 和 2（都在仓库 0）。总花费 $2 + 2 \times 1 = 4$。
净收益 $(10+15) - 4 = 21 \ge 15$。满足。

### 样例 2

**输入：**

```text
5 3 15
2 1
1 1
3 2
4 2
1 5
10 1
10 1
10 1
```

**输出：**

```text
3
```

### 子任务

* 30% 的数据满足：$m \le 15$；
* 另有 40% 的数据满足：$a_i \le 20$；
* 全部的数据满足：
  * $0 < n, m \le 1000$
  * $0 < b_j, c_j \le 20$
  * $0 < a_i \le 1000$
  * $0 < v \le 10^6$ 且保证至少存在一种可满足要求的卖货方案。

---

## 题目 5：哥德尔机

**时间限制：** 5.0 秒  
**空间限制：** 1024 MiB

### 题目背景

ReLU 函数定义为：$ReLU(x) = \max(0, x)$。

### 题目描述

机器内部维护了一个神经网络，权重是一个二维矩阵 $V$，初始权重为 0。

1. **学习阶段**：进行 $n$ 轮学习。
   * 每轮给出参数 $x_1, x_2, y_1, y_2, v$。
   * 对满足 $x_1 \le x \le x_2, y_1 \le y \le y_2$ 的每个位置 $(x, y)$，更新权重：
     $$ V(x, y) \leftarrow v + ReLU(V(x, y) - v) $$
     即 $V(x, y) \leftarrow \max(v, V(x, y))$。
2. **推理阶段**：进行 $m$ 次推理。
   * 每次给出参数 $x_1, x_2, y_1, y_2$。
   * 查询对应子矩阵范围内最大的权重：
     $$ \max_{x_1 \le x \le x_2, y_1 \le y \le y_2} V(x, y) $$

### 输入格式

从标准输入读入数据。
输入的第一行包含两个整数 $n, m$。
接下来 $n$ 行每行五个整数 $x_1, x_2, y_1, y_2, v$，表示学习操作。
接下来 $m$ 行每行四个整数 $x_1, x_2, y_1, y_2$，表示推理操作。

### 输出格式

输出到标准输出。
共 $m$ 行，依次表示每次查询操作的答案。

### 样例 1

**输入：**

```text
5 5
1 3 2 3 3
4 5 2 5 1
3 5 1 2 1
2 5 3 4 4
1 4 3 4 2
1 5 2 5
1 5 2 5
1 5 1 5
1 4 1 5
2 5 1 3
```

**输出：**

```text
4
4
4
4
4
```

### 子任务

* 10% 数据：$n, m \le 100$。
* 10% 数据：$n, m \le 10^3$。
* 20% 数据：$n, m \le 10^4$。
* 20% 数据：$n, m \le 5 \times 10^4$。
* 10% 数据：$n \le 10^3$（此处可能为笔误，或者是针对只有查询较大的情况，结合题目通常 $n$ 为操作数）。
* 100% 数据：$1 \le n, m \le 5 \times 10^5$，坐标范围 $1 \le x, y \le n$，值 $1 \le v \le n$。所有数值为整数。
